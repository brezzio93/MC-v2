<!-- Game Options Component -->
<h1>Opciones de Juego</h1>

<!-- Players Quantity -->
<dx-number-box
    label="Jugadores"
    labelMode="floating"
    [showSpinButtons]="true"
    [min]="1"
    [max]="4"
    [value]="playersQty"
    (onValueChanged)="onPlayersQtyChange($event.value)"
    >
</dx-number-box>

<!-- Villain -->
<dx-select-box
    label="Villano"
    labelMode="floating"
    [searchEnabled]="true"
    [items]="villains"
    displayExpr="text"
    valueExpr="card_set_code"
    (onValueChanged)="onEncounterSelected($event.value)"
    >
</dx-select-box>

<hr>

<!-- Villain Details -->
@if(villain != null) {
    <div style="display: flex; justify-content: space-between;">
        <div style="width: 45%;">
            @if(villain.villain_phases != null) {
                <h1> {{ villain.villain_phases[0].health * playersQty }} HP</h1>
                <img 
                    style="width: 100%;"
                    [src]="'https://es.marvelcdb.com'+villain.villain_phases[0].imagesrc"
                    alt="{{ villain.villain_phases[0].name }}" />
            }
        </div>
        <div style="width: 45%;">
            @if(villain.main_scheme != null && villain.main_scheme.length > 0) {
                @for(scheme of villain.main_scheme; track scheme) {
                    <h1> Amenaza: {{ scheme.base_threat }} / {{ scheme.threat }} </h1>
                    <img 
                        style="width: 100%;"
                        [src]="scheme.imagesrc"
                        alt="{{ scheme.name }}" 
                    />
                    <h3>Aumento de amenaza: {{ scheme.escalation_threat }}</h3>
                }
            }
        </div>
    </div>
}

<!-- Start Game Button -->
<dx-button
    (onClick)="onStartGame()" 
    text="Comenzar Juego">
</dx-button>